<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/random_words.css">
</head>
<body>


<div id="content">
    <header class="background-theme" id="header">
        <a id="home-link" href="/useful_pages">
            <svg class="icon-header" id="svg-home" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                 viewBox="0 0 32 32">
                <path d="M 16 3 L 3 18 L 7 18 L 7 30 L 12.5 30 L 12.5 20 L 19.5 20 L 19.5 30 L 25 30 L 25 18 L 30 18 Z"
                      stroke-width="2"
                      stroke="white"
                      stroke-linejoin="round"
                      stroke-linecap="round"
                      fill="white"></path>
            </svg>
        </a>
        <svg class="icon-header" id="svg-previous" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
             viewBox="0 0 32 32">
            <polyline points="24,2 8,14 24,30" stroke="white" fill-opacity="0" stroke-width="3"
                      stroke-linejoin="round"
                      stroke-linecap="round"></polyline>
        </svg>
        <svg class="icon-header" id="svg-refresh" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
             viewBox="0 0 32 32">
            <path fill="white"
                  d="M 16 4 C 10.886719 4 6.617188 7.160156 4.875 11.625 L 6.71875 12.375 C 8.175781 8.640625 11.710938 6 16 6 C 19.242188 6 22.132813 7.589844 23.9375 10 L 20 10 L 20 12 L 27 12 L 27 5 L 25 5 L 25 8.09375 C 22.808594 5.582031 19.570313 4 16 4 Z M 25.28125 19.625 C 23.824219 23.359375 20.289063 26 16 26 C 12.722656 26 9.84375 24.386719 8.03125 22 L 12 22 L 12 20 L 5 20 L 5 27 L 7 27 L 7 23.90625 C 9.1875 26.386719 12.394531 28 16 28 C 21.113281 28 25.382813 24.839844 27.125 20.375 Z"></path>
        </svg>
    </header>
    <main>
        <h2 id="word"></h2>
        <div id="dic-group">
            <a id="dic-eng" href="#" target="_blank">
                <svg class="icon-header" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                     viewBox="0 0 32 32">
                    <path class="fill-theme stroke-theme" d="M 2 14 L 14 22 L 30 14 L 18 6 Z"
                          stroke-width="2" stroke-linejoin="round" stroke-linecap="round"></path>
                    <path fill="white" class="stroke-theme"
                          d="M 2 14 L 14 22 L 30 14 L 30 20 L 14 28 L 2 20 Z"
                          stroke-width="2" stroke-linejoin="round" stroke-linecap="round"></path>
                    <text fill="white" x="16" y="16" text-anchor="middle" font-family="cursive" font-size="14px"
                          transform="rotate(50 13.4,12)">E
                    </text>
                </svg>
            </a>

            <a id="dic-jap" href="#" target="_blank">
                <svg class="icon-header" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                     viewBox="0 0 32 32">
                    <path class="fill-theme stroke-theme" d="M 2 14 L 14 22 L 30 14 L 18 6 Z"
                          stroke-width="2" stroke-linejoin="round" stroke-linecap="round"></path>
                    <path fill="white" class="stroke-theme"
                          d="M 2 14 L 14 22 L 30 14 L 30 20 L 14 28 L 2 20 Z"
                          stroke-width="2" stroke-linejoin="round" stroke-linecap="round"></path>
                    <text fill="white" x="16" y="16" text-anchor="middle" font-family="cursive" font-size="14px"
                          transform="rotate(50 13.4,12)">J
                    </text>
                </svg>
            </a>
        </div>
    </main>
    <footer class="background-theme" id="footer">
        <svg id="btn-next" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 32 32">
            <circle class="stroke-theme" cx="16" cy="16" r="14" fill="white"></circle>
            <path class="fill-theme stroke-theme" d="M 11 8 L 24 16 L 11 24 Z" stroke-width="2"
                  stroke-linejoin="round"
                  stroke-linecap="round"></path>
        </svg>
    </footer>
</div>

<script src="js/english_words.js"></script>
<script src="../js/utils/random.js"></script>
<script>
    window.onload = function () {
        let current_index = -1;

        function refresh() {
            random_sort(words);
            current_index = -1;
            next_click();
        }

        function next_word() {
            if (current_index === words.length - 1)
                current_index = -1;
            return words[++current_index];
        }

        function previous_word() {
            if (current_index === 0)
                current_index = words.length;
            return words[--current_index];
        }

        function show_word(word) {
            document.getElementById('word').innerText = word;
            document.getElementById('dic-eng').href = "https://www.dictionary.com/browse/" + word + "?s=ts";
            document.getElementById('dic-jap').href = "https://ejje.weblio.jp/content/" + word;
        }

        function refresh_click() {
            refresh();
            change_theme();
        }

        function next_click() {
            show_word(next_word());
        }

        function previous_click() {
            show_word(previous_word());
        }

        function change_theme() {
            const theme_colors = [
                '#25383c', '#4863A0', '#566d7e', '#008080', '#4e8975', '#617c58', '#254117', '#eac117', '#e8a317', 'tomato', '#f87217', '#e55451', '#810541', '#4b0082'
            ];
            const color = theme_colors[random_int(0, theme_colors.length)];
            const theme_classes = ['fill', 'background', 'stroke'];
            for (let i = 0; i < theme_classes.length; ++i) {
                const theme_els = document.getElementsByClassName(theme_classes[i] + '-theme');
                for (let j = 0; j < theme_els.length; ++j) {
                    theme_els[j].style[theme_classes[i]] = color;
                }
            }
        }


        document.getElementById('svg-refresh').onclick = refresh_click;
        document.getElementById('svg-previous').onclick = previous_click;
        document.getElementById('btn-next').onclick = next_click;

        refresh();
    }
</script>
</body>
</html>